{% extends "base.html" %}
{% block title %}Source details{% endblock %}
{% block content %}
    <h2>{{ dicts[0]["name"] }}</h2>
    RA: {{ dicts[0]["ra"] }} DEC: {{ dicts[0]["dec"] }}
    <br>
    {% if tables[0] == "racs_component" %}
        Total flux gaussian: {{ dicts[0]["total_flux_gaussian"] }}mJy <br>
        Total flux source: {{ dicts[0]["total_flux_source"] }}mJy
    {% else %}
        Total flux: {{ dicts[0]["total_flux_source"] }}mJy
    {% endif %}
    <br>
    [<a href="{{url_for('show', id=dicts[0]['id'], table=tables[0])}}">View More</a>]
    <br>
    <br>
    <!-- Display some basic information from all other tables -->
    {% for i in range(dicts | length) if i != 0 %}
        <b>{{ tables[i] | capitalize }} entry:</b><br>
        Name: <a href="{{url_for('show', id=dicts[i]['id'], table=tables[i])}}">{{ dicts[i]["name"] }}</a> <br>
        RA: {{ dicts[i]["ra"] }}, DEC: {{ dicts[i]["dec"] }}<br>
        Angular distance: {{ dicts[i]["angdist"] | round(3) }}"<br>
        Match confidence: {{ (dicts[i]["confidence"] * 100) | round(2) }}%<br>
    {% endfor %}

    <!-- Make a WISE colour-colour plot if the data exists -->
    {% if wise_plot != None and wise_plot[0] != None and wise_plot[1] != None%}
    <svg width="400" height="400" xmlns="http://www.w3.org/2000/svg">

        <image href="/static/base_wise.png" x="0" y="0" width="100%" height="100%"/>
        <!-- plot points -->
        <g id="plot-layer">
            <!-- in this scale, (0,0) is at (110, 312). To get to (1, 1) (148, 237), travel (+38, -75) -->
            <circle
                cx="{{ 110 + 38 * wise_plot[0] }}"
                cy="{{ 312 - 75 * wise_plot[1] }}"
                r="4"
                fill="hsl(270, 100%, 50%)"
            />
    </svg>
    {% endif %}

{% endblock %}